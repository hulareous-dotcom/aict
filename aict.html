<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T∆∞∆°ng Lai CSKH 24/7 v·ªõi AI Chatbot</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        
        /* Gradient Text */
        .text-gradient {
            background: linear-gradient(to right, #2563eb, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* === N√öT CHAT MESSENGER C≈® === */
        .messenger-bubble {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            /* Gradient xanh ƒë·∫∑c tr∆∞ng c·ªßa Messenger c≈© */
            background: linear-gradient(135deg, #0084ff, #00c6ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0, 132, 255, 0.3);
            z-index: 100;
            transition: transform 0.3s ease;
        }
        .messenger-bubble:hover { transform: scale(1.1); }
        .messenger-icon { color: white; font-size: 32px; }

        /* H·ªôp Chat */
        .chat-box {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            max-height: 80vh;
            background: white;
            border-radius: 16px;
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);
            z-index: 99;
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            flex-direction: column;
            overflow: hidden;
            border: 1px solid #eee;
        }
        .chat-box.open { display: flex; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Tin nh·∫Øn */
        .msg { max-width: 80%; padding: 10px 14px; border-radius: 18px; margin-bottom: 8px; font-size: 14px; line-height: 1.5; }
        .msg-user { background: #0084ff; color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .msg-ai { background: #f0f2f5; color: #050505; align-self: flex-start; border-bottom-left-radius: 4px; }
        .typing { font-style: italic; color: #888; font-size: 12px; margin-left: 10px; margin-bottom: 10px; display: none; }

        /* Scrollbar t√πy ch·ªânh cho khung chat */
        .chat-scroll::-webkit-scrollbar { width: 6px; }
        .chat-scroll::-webkit-scrollbar-thumb { background-color: #ccc; border-radius: 10px; }

        /* Placeholder ·∫¢nh (N·∫øu ch∆∞a c√≥ ·∫£nh th·∫≠t) */
        .img-placeholder { width: 100%; height: 300px; background: linear-gradient(45deg, #f3f4f6, #e5e7eb); display: flex; align-items: center; justify-content: center; color: #9ca3af; font-weight: bold; border-radius: 12px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <section class="min-h-screen flex items-center justify-center pt-20 pb-10 px-6 bg-white relative overflow-hidden">
        <div class="absolute top-0 right-0 -mt-20 -mr-20 w-96 h-96 bg-blue-100 rounded-full filter blur-3xl opacity-50 z-0"></div>
        <div class="absolute bottom-0 left-0 -mb-20 -ml-20 w-96 h-96 bg-cyan-100 rounded-full filter blur-3xl opacity-50 z-0"></div>
        
        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-center relative z-10">
            <div>
                <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight">
                    ChƒÉm S√≥c Kh√°ch H√†ng <br>
                    <span class="text-gradient">Kh√¥ng Ng·ªß 24/7</span>
                </h1>
                <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                    Kh√°m ph√° s·ª©c m·∫°nh c·ªßa AI Chatbot. Lu√¥n s·∫µn s√†ng, ph·∫£n h·ªìi t·ª©c th√¨ v√† th·∫•u hi·ªÉu kh√°ch h√†ng c·ªßa b·∫°n m·ªçi l√∫c, m·ªçi n∆°i.
                </p>
                <button onclick="toggleChat()" class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition">
                    Tr·∫£i nghi·ªám ngay <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
            <div class="hidden md:block">
                <img src="https://source.unsplash.com/random/600x600/?ai,robot,support" alt="AI Chatbot Illustration" class="rounded-2xl shadow-2xl transform hover:rotate-2 transition duration-500">
                </div>
        </div>
    </section>

    <section class="py-20 px-6 bg-gray-50">
        <div class="max-w-5xl mx-auto text-center mb-16">
            <h2 class="text-3xl font-bold mb-4">T·∫°i sao Kh√°ch h√†ng r·ªùi b·ªè b·∫°n?</h2>
            <p class="text-gray-600">Th·ªùi gian ch·ªù ƒë·ª£i l√¢u v√† ph·∫£n h·ªìi thi·∫øu ch√≠nh x√°c l√† nguy√™n nh√¢n h√†ng ƒë·∫ßu.</p>
        </div>

        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-center bg-white p-8 rounded-3xl shadow-sm">
            <div class="order-2 md:order-1">
                <div class="aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow-lg relative" style="padding-bottom: 56.25%; height: 0;">
                    <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/yGZcI6f1mRg?si=Xj-5sZd40yv7N6dF" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    </div>
            </div>
            <div class="order-1 md:order-2">
                <h3 class="text-2xl font-bold mb-4">Gi·∫£i ph√°p: AI Chatbot Th·∫ø h·ªá m·ªõi</h3>
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                        <p><strong>Ph·∫£n h·ªìi < 1 gi√¢y:</strong> Lo·∫°i b·ªè ho√†n to√†n th·ªùi gian ch·ªù ƒë·ª£i.</p>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                        <p><strong>X·ª≠ l√Ω ƒëa nhi·ªám:</strong> H·ªó tr·ª£ h√†ng ng√†n kh√°ch h√†ng c√πng l√∫c.</p>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                        <p><strong>H·ªçc h·ªèi li√™n t·ª•c:</strong> C√†ng t∆∞∆°ng t√°c, c√†ng th√¥ng minh nh·ªù Gemini AI.</p>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <section class="py-20 px-6 bg-white">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">L·ª£i √≠ch Doanh nghi·ªáp</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-blue-50 p-8 rounded-2xl border border-blue-100 text-center hover:shadow-md transition">
                    <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Ti·∫øt ki·ªám Chi ph√≠</h3>
                    <p class="text-gray-600">Gi·∫£m ƒë·∫øn 70% chi ph√≠ v·∫≠n h√†nh ƒë·ªôi ng≈© CSKH c∆° b·∫£n.</p>
                </div>
                <div class="bg-cyan-50 p-8 rounded-2xl border border-cyan-100 text-center hover:shadow-md transition">
                    <div class="w-16 h-16 bg-cyan-100 text-cyan-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">TƒÉng Doanh thu</h3>
                    <p class="text-gray-600">T·ª± ƒë·ªông t∆∞ v·∫•n v√† ch·ªët ƒë∆°n ngay c·∫£ khi b·∫°n ƒëang ng·ªß.</p>
                </div>
                <div class="bg-purple-50 p-8 rounded-2xl border border-purple-100 text-center hover:shadow-md transition">
                    <div class="w-16 h-16 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">N√¢ng cao Tr·∫£i nghi·ªám</h3>
                    <p class="text-gray-600">Kh√°ch h√†ng lu√¥n ƒë∆∞·ª£c l·∫Øng nghe v√† h·ªó tr·ª£ 24/7.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-gray-400 py-8 text-center">
        <p>¬© 2023 AI Chatbot Solutions. Powered by Gemini & Render.</p>
    </footer>


    <div class="messenger-bubble" onclick="toggleChat()">
        <i class="fab fa-facebook-messenger messenger-icon"></i>
    </div>

    <div class="chat-box" id="chat-box">
        <div class="bg-gradient-to-r from-blue-600 to-cyan-500 p-4 flex justify-between items-center text-white">
            <div class="flex items-center">
                <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-3">
                    <i class="fas fa-robot"></i>
                </div>
                <div>
                    <h3 class="font-bold">Tr·ª£ l√Ω AI 24/7</h3>
                    <p class="text-xs text-blue-100 flex items-center"><span class="w-2 h-2 bg-green-400 rounded-full mr-1"></span> ƒêang ho·∫°t ƒë·ªông</p>
                </div>
            </div>
            <button onclick="toggleChat()" class="text-white/80 hover:text-white text-xl">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="flex-1 p-4 overflow-y-auto chat-scroll bg-gray-50 flex flex-col" id="chat-messages">
            <div class="msg msg-ai">
                üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o AI.<br>B·∫°n c·∫ßn h·ªó tr·ª£ g√¨ v·ªÅ d·ªãch v·ª• CSKH 24/7 h√¥m nay?
            </div>
        </div>
        
        <div class="typing" id="typing-indicator">
            <i class="fas fa-ellipsis-h"></i> AI ƒëang so·∫°n tin...
        </div>

        <div class="p-3 border-t border-gray-200 bg-white">
            <form id="chat-form" class="flex gap-2">
                <input type="text" id="chat-input" class="flex-grow bg-gray-100 rounded-full px-4 py-2 outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nh·∫≠p tin nh·∫Øn..." autocomplete="off" disabled>
                <button type="submit" id="send-btn" class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </div>


    <script>
        // 1. H√†m b·∫≠t/t·∫Øt Chatbox
        function toggleChat() {
            const chatBox = document.getElementById('chat-box');
            chatBox.classList.toggle('open');
            // Focus v√†o √¥ nh·∫≠p khi m·ªü
            if (chatBox.classList.contains('open')) {
                setTimeout(() => document.getElementById('chat-input').focus(), 300);
            }
        }

        // 2. C·∫§U H√åNH FIREBASE (D√πng l·∫°i config c≈© c·ªßa b·∫°n)
        const firebaseConfig = {
            apiKey: "AIzaSyBMUvMykvoYX43Xl2LtZKKwN9IsBLN41Qs",
            authDomain: "aict-3d755.firebaseapp.com",
            projectId: "aict-3d755",
            storageBucket: "aict-3d755.firebasestorage.app",
            messagingSenderId: "30673828530",
            appId: "1:30673828530:web:7e4df9420ab25efcd167ab",
            measurementId: "G-3T9PB6P6SC"
        };

        // 3. KH·ªûI T·∫†O & X·ª¨ L√ù CHAT
        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
            const auth = firebase.auth();
            // S·ª≠ d·ª•ng collection chung ƒë·ªÉ demo
            const messagesRef = db.collection('chats').doc('global_room').collection('messages');

            const inputEl = document.getElementById('chat-input');
            const btnEl = document.getElementById('send-btn');
            const msgArea = document.getElementById('chat-messages');
            const typingIndicator = document.getElementById('typing-indicator');

            // ƒêƒÉng nh·∫≠p ·∫©n danh ƒë·ªÉ d√πng Firebase
            auth.signInAnonymously().catch(err => console.error("L·ªói Auth:", err));

            auth.onAuthStateChanged(user => {
                if (user) {
                    // M·ªü kh√≥a √¥ nh·∫≠p khi ƒë√£ k·∫øt n·ªëi
                    inputEl.disabled = false;
                    btnEl.disabled = false;
                    inputEl.placeholder = "Nh·∫≠p tin nh·∫Øn...";
                    setupRealtimeChat();
                }
            });

            // L·∫Øng nghe tin nh·∫Øn m·ªõi t·ª´ Firebase
            function setupRealtimeChat() {
                messagesRef.orderBy('timestamp', 'asc').onSnapshot(snapshot => {
                    // X√≥a tin c≈© ƒë·ªÉ render l·∫°i (ƒë∆°n gi·∫£n h√≥a)
                    msgArea.innerHTML = `<div class="msg msg-ai">üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω ·∫£o AI.<br>B·∫°n c·∫ßn h·ªó tr·ª£ g√¨ v·ªÅ d·ªãch v·ª• CSKH 24/7 h√¥m nay?</div>`;
                    snapshot.forEach(doc => {
                        const data = doc.data();
                        appendMessage(data.text, data.sender);
                    });
                    scrollToBottom();
                });
            }

            // X·ª≠ l√Ω s·ª± ki·ªán G·ª≠i tin nh·∫Øn
            document.getElementById('chat-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                const text = inputEl.value.trim();
                if (!text) return;

                inputEl.value = ''; // X√≥a √¥ nh·∫≠p
                inputEl.focus();

                // 1. L∆∞u tin nh·∫Øn c·ªßa User l√™n Firebase
                await messagesRef.add({
                    text: text,
                    sender: 'user',
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                // 2. Hi·ªán hi·ªáu ·ª©ng "ƒêang nh·∫≠p..."
                typingIndicator.style.display = 'block';
                scrollToBottom();

                // 3. G·ªåI API TR√äN RENDER (LINK C·ª¶A B·∫†N)
                try {
                    const response = await fetch('https://my-gemini-api.onrender.com/api/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: text })
                    });
                    
                    const data = await response.json();
                    
                    // 4. ·∫®n hi·ªáu ·ª©ng "ƒêang nh·∫≠p..."
                    typingIndicator.style.display = 'none';

                    // 5. L∆∞u c√¢u tr·∫£ l·ªùi c·ªßa AI l√™n Firebase
                    if (data.reply) {
                         await messagesRef.add({
                            text: data.reply,
                            sender: 'ai',
                            timestamp: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }

                } catch (error) {
                    console.error("L·ªói g·ªçi API Render:", error);
                    typingIndicator.style.display = 'none';
                    // B√°o l·ªói nh·∫π nh√†ng cho ng∆∞·ªùi d√πng
                    appendMessage("‚ö†Ô∏è Xin l·ªói, server ƒëang b·∫≠n. Vui l√≤ng th·ª≠ l·∫°i sau gi√¢y l√°t.", "ai");
                }
            });

        } catch (error) {
            console.error("L·ªói kh·ªüi t·∫°o Firebase:", error);
            alert("C√≥ l·ªói x·∫£y ra khi k·∫øt n·ªëi d·ªãch v·ª• Chat.");
        }

        // H√†m ph·ª• tr·ª£: Hi·ªÉn th·ªã tin nh·∫Øn
        function appendMessage(text, sender) {
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'msg msg-user' : 'msg msg-ai';
            // Chuy·ªÉn k√Ω t·ª± xu·ªëng d√≤ng (\n) th√†nh th·∫ª <br> ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng
            div.innerHTML = text ? text.replace(/\n/g, '<br>') : '...';
            msgArea.appendChild(div);
            scrollToBottom();
        }

        // H√†m ph·ª• tr·ª£: Cu·ªôn xu·ªëng cu·ªëi khung chat
        function scrollToBottom() {
             msgArea.scrollTop = msgArea.scrollHeight;
        }

    </script>
</body>
</html>
